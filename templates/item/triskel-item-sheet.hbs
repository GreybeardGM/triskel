<form class="triskel" autocomplete="off">
  <header class="sheet-header">
    <div class="header-fields">
      <h1 class="charname">
        <input name="name" type="text" value="{{item.name}}" placeholder="Item Name" />
      </h1>
      <div class="item-type-label">
        <span class="item-type-label__title">Typ</span>
        <span class="item-type-label__value">{{item.type}}</span>
      </div>
    </div>
  </header>

  <section class="item-panels">
    <div class="item-panel">
      <h2>Actions</h2>
      <ol class="reference-entries">
        {{#each references.actions as |reference|}}
          <li class="reference-row">
            <span class="reference-label">{{reference.label}}</span>
            <button type="button" data-action="removeActionReference" data-index="{{reference.index}}">Entfernen</button>
          </li>
        {{/each}}
        {{#unless references.actions.length}}
          <li class="reference-row reference-row--empty">Keine Referenzen hinterlegt</li>
        {{/unless}}
      </ol>

      <div class="reference-controls">
        <label class="reference-controls__label" for="actions-reference-select">
          Ref hinzufügen
        </label>
        <div class="reference-controls__inputs">
          <select
            id="actions-reference-select"
            name="actionsRef"                          {{!-- NEU --}}
            data-reference-select="actions"
          >
            {{!-- Options aus TRISKEL_ACTIONS --}}
          </select>
      
          <button
            type="button"
            data-action="addActionReference"
            data-select-field="actionsRef"            {{!-- NEU --}}
            data-ref-path="system.actions.ref"        {{!-- NEU: Ziel-Array --}}
          >
            Hinzufügen
          </button>
        </div>
      </div>

    <div class="item-panel">
      <h2>Forms</h2>
      <ol class="reference-entries">
        {{#each references.forms as |reference|}}
          <li class="reference-row">
            <span class="reference-label">{{reference.label}}</span>
            <button type="button" data-action="removeFormReference" data-index="{{reference.index}}">Entfernen</button>
          </li>
        {{/each}}
        {{#unless references.forms.length}}
          <li class="reference-row reference-row--empty">Keine Referenzen hinterlegt</li>
        {{/unless}}
      </ol>

      <div class="reference-controls">
        <label class="reference-controls__label" for="forms-reference-select">
          Ref hinzufügen
        </label>
        <div class="reference-controls__inputs">
          <select
            id="forms-reference-select"
            name="formsRef"                            {{!-- NEU --}}
            data-reference-select="forms"
          >
            {{!-- Options aus TRISKEL_FORMS --}}
          </select>
      
          <button
            type="button"
            data-action="addFormReference"
            data-select-field="formsRef"              {{!-- NEU --}}
            data-ref-path="system.forms.ref"          {{!-- NEU --}}
          >
            Hinzufügen
          </button>
        </div>
      </div>
    </div>

    <div class="item-panel item-panel--full">
      <h2>Modifiers</h2>
      <ol class="reference-entries">
        {{#each modifiers as |modifier|}}
          <li class="reference-row">
            <span class="reference-label">{{modifier.label}}</span>
            <span class="modifier-value">{{modifier.value}}</span>
            <button type="button" data-action="removeModifier" data-index="{{modifier.index}}">Entfernen</button>
          </li>
        {{/each}}
        {{#unless modifiers.length}}
          <li class="reference-row reference-row--empty">Keine Modifiers hinterlegt</li>
        {{/unless}}
      </ol>
      
      <div class="reference-controls">
        <label class="reference-controls__label" for="modifier-skill">
          Skill-Mod hinzufügen
        </label>
        <div class="reference-controls__inputs">
          <select
            id="modifier-skill"
            name="modifierSkill"                       {{!-- NEU --}}
            data-modifier-skill
          >
            {{!-- Skill-Options --}}
          </select>
      
          <input
            type="number"
            step="1"
            value="0"
            id="modifier-value"
            name="modifierValue"                       {{!-- NEU --}}
            data-modifier-value
          />
      
          <button
            type="button"
            data-action="addModifier"
            data-skill-field="modifierSkill"          {{!-- NEU --}}
            data-value-field="modifierValue"          {{!-- NEU --}}
            data-ref-path="system.modifiers"          {{!-- NEU --}}
          >
            Hinzufügen
          </button>
        </div>
      </div>

    </div>
  </section>
</form>
