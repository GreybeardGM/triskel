<section
  class="tab {{tabs.actions.id}} {{tabs.actions.cssClass}}"
  data-tab="{{tabs.actions.id}}"
  data-group="{{tabs.actions.group}}"
>
  {{#*inline "actionFilters"}}
    <div class="actions-grid__filters" role="group" aria-label="{{localize "TRISKEL.Action.Filter.Label"}}">
      {{#each actionFilter.options as |option|}}
        <button
          type="button"
          class="actions-filter__button {{#if option.isActive}}is-active{{/if}}"
          data-action="filterActionType"
          data-filter-value="{{option.id}}"
        >
          {{localize option.label}}
        </button>
      {{/each}}
    </div>
  {{/inline}}

  {{#*inline "actionCards"}}
    <div class="actions-grid">
      {{#each this as |action|}}
        <article class="action-card">
          <button
            type="button"
            class="roll-helper__entry roll-helper__action is-interactive {{action.reserve}} {{#if action.isSelected}}is-selected{{/if}}"
            data-action="selectAction"
            data-action-key="{{action.id}}"
            data-reserve="{{action.reserve}}"
          >
            {{#if action.image}}
              <img class="roll-helper__entry-icon" src="{{action.image}}" alt="" />
            {{/if}}

            <div class="roll-helper__entry-label">{{action.label}}</div>

            {{#if action.reserveLabel}}
              <div class="roll-helper__entry-reserve">{{action.reserveLabel}}</div>
            {{else}}
              {{#if action.reserve}}
                <div class="roll-helper__entry-reserve">{{action.reserve}}</div>
              {{/if}}
            {{/if}}

            <div class="roll-helper__entry-skill">{{action.skillLabel}}</div>
            <div class="roll-helper__entry-bonus">{{numberFormat action.skillTotal decimals=0 sign=true}}</div>

            {{#if action.scale}}
              <div class="roll-helper__entry-scale">{{action.scale}}</div>
            {{/if}}

            {{#if action.cost}}
              <div class="roll-helper__entry-cost">{{numberFormat action.cost decimals=0}}</div>
            {{/if}}
          </button>

          {{#if action.forms.length}}
            <ul class="action-card__forms">
              {{#each action.forms as |form|}}
                <li>
                  <button
                    type="button"
                    class="roll-helper__entry roll-helper__form is-interactive {{form.reserve}} {{#if form.active}}is-selected{{/if}}"
                    title="{{form.description}}"
                    data-action="toggleForm"
                    data-form-key="{{form.id}}"
                    data-reserve="{{form.reserve}}"
                  >
                    {{#if form.image}}
                      <img class="roll-helper__entry-icon" src="{{form.image}}" alt="" />
                    {{/if}}

                    <div class="roll-helper__entry-label">{{form.label}}</div>

                    {{#if form.reserveLabel}}
                      <div class="roll-helper__entry-reserve">{{form.reserveLabel}}</div>
                    {{else}}
                      {{#if form.reserve}}
                        <div class="roll-helper__entry-reserve">{{form.reserve}}</div>
                      {{/if}}
                    {{/if}}

                    <div class="roll-helper__entry-skill">{{form.skillLabel}}</div>
                    <div class="roll-helper__entry-bonus">{{numberFormat form.skillBonus decimals=0 sign=true}}</div>

                    {{#if form.scale}}
                      <div class="roll-helper__entry-scale">{{form.scale}}</div>
                    {{/if}}

                    {{#if form.cost}}
                      <div class="roll-helper__entry-cost">{{numberFormat form.cost decimals=0}}</div>
                    {{/if}}

                    {{#if form.description}}
                      <div class="roll-helper__entry-description">{{form.description}}</div>
                    {{/if}}
                  </button>
                </li>
              {{/each}}
            </ul>
          {{/if}}

          {{#if action.description}}
            <p class="roll-helper__entry-description action-card__description">{{action.description}}</p>
          {{/if}}
        </article>
      {{/each}}
    </div>
  {{/inline}}

  {{#if actionFilter.actions.length}}
    <header class="actions-grid__header">
      <h3 class="actions-grid__title">{{localize "TRISKEL.Actor.Tab.Actions"}}</h3>
      {{> actionFilters}}
    </header>
    {{> actionCards actionFilter.actions}}
  {{/if}}

  {{#if actionFilter.spells.length}}
    <header class="actions-grid__header">
      <h3 class="actions-grid__title">{{localize "TRISKEL.Item.Type.Spell"}}</h3>
      {{> actionFilters}}
    </header>
    {{> actionCards actionFilter.spells}}
  {{/if}}
</section>
